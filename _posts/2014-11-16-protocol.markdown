---
layout: post
title:  "Protocol!"
date:   2014-11-16 16:11:10
categories: android sinagz
---
#Protocol & Dataformat
[TOC]

##基础
### 请求方式
使用HTTP POST
### 签名计算
- 全部参数按照 key 的字典顺序排序。
- 把所有的key和value，无间隔拼接。(value为空的情况也加入MD5校验)
- 结尾添加 app_secret。
- 取MD5值。

### 公共参数

|参数名称|数据类型|说明|
|--------|--------|--------|
|method|string|Protocol's method|
|token|string|签名校验|
|app_key|string|app应用代码|

##两端共用
### 获取图片验证码 (app.user.captcha)
`http://www.sinagz.com.cn/Api/User/captcha.html?session_id=imei`


###上传图片音频(IM用)
`app.upload.im`
上传资源
####Request

|参数名称	|是否必填项|说明|
|--------|--------|--------|
|type|是|资源类型：1音频，2图片|
|data|是|图片或者音频的二进制文件流|
|sec|否|语音时长，单位为秒，如果type为1时必填|

####Response

|参数名称	|数据类型	|说明|
|--------|--------|--------|
|result	|int		|执行结果：1成功 0失败|
|data	|object	|返回的数据主体|
|message	|string	|result为0时，返回错误信息|

######{data}数据格式：
|参数名称	|数据类型	|说明|
|--------|--------|--------|
|url		|string	|资源url|
|sec		|string	|音频返回时间长度，图片返回空字符串|

######Example
```
{
	"message": "上传成功",
	"data": {
		"uri": "sinagz_project/9d/e1/54574dac897be04a6002_s.png",
		"url": "http://bjcache.house.sina.com.cn/gongzhang/sinagz_project/9d/e1/54574dac897be04a6002_s.png"
	},
	"result": 1
}
```

##工长端

###登录 (app.worker.login)

####Request

|参数名称	 |数据类型	|是否必填项	|说明|
|----|----|----|----|
|session_id	 |string	|是			|设备imei码|
|username	 |string	|是			|用户名|
|password	 |string	|是			|密码|
|captcha	 |string	|是			|验证码|
|plat		 |int		|是			|android为2,ios为1|
|devicetoken |tring		|是			|设备号|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式：

|参数名称|数据类型	|说明|
|----|----|----|
|userid		|string		|用户id|
|ucode		|string		|用户id密文|
|usertype	|int		|1工长,3监理|
|picurl		|string		|头像地址|
|name		|object		|名称|
|tel		|string		|电话|

######Example
```
{
	"result": 1,
	"data": {
		"userid": "c1243",
		"usertype": "1",
		"ucode": "ohPxT\/Vog0AefJdn93o3t3Lt2SozOU8hq6q2i3ZxzVc6BRHEuhxc8RWb5PTO+nyo\/UWTmazqDEmj3xXGp5PvbMQxfNCm2GuwEydXNLpHh\/o6aFc\/ESrujm8uwAg1O7nmvQPpEoiBTx52r1GnqmSjUcDV9drE+EEISNDiL6Inm5LX8yzn4OmPdbjGyQQvlXnYBhUHsWM=",
		"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
		"name": "baorui",
		"tel": "18610211532",
		"server_time": "1415238213676"
	},
	"message": "\u767b\u5f55\u6210\u529f"
}
```

###修改密码 (app.worker.password)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户密文id|
|old_pw	|string	|是	|旧密码|
|new_pw	|string	|是	|新密码|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result	|int	|执行结果：1成功 0失败|
|data	|object	|无|
|message	|string	|result为0时，返回错误信息|

######Example
修改成功:
```
{
    "message": "", 
    "data": "", 
    "result": 1
}```

修改失败:

```
{
    "result": 0,
    "data": [],
    "message": "旧密码不正确"
}```



### 系统信息 (app.system.info)

获取版本信息，获取联系我们的电话

####Request

|参数名称		|数据类型	|是否必填项	|说明|
|----|----|----|----|
|type			|int		|是			|1为ios请求2 为android请求根据type返回不一样的地址|
|client_type	|int		|是			|1 为C端客户端2 为B端工长监理端|
|client_ver		|int		|是			|用户当前版本号(如101)|

####Response

|参数名称	|数据类型	|说明|
|----|---|----|
|result		|int	|执行结果：1成功 0失败|
|data		|object	|返回的数据主体|
|message		|string	|result为0时，返回错误信息|

######{data}数据格式：

|参数名称			|数据类型	|说明|
| --------   | :-----:  | ---- |
|ver				|	string		|返回当前服务端最新版本信息|
|cver				|int			|int型当前版本（如102）|
|download			|string		|type为1返回appstore地址 type为2返回apk下载地址|
|tel				|	string		|联系我们的电话|
|force_update		|bool		|true强制升级 false不强制|

######Example
```
{
    "result": 1,
    "data": {
        "ver": "1.0.0",
        "download": "http://www.xxx.com/xxx.apk",
        "tel": "13466587484"
    },
    "message": ""
}```

### 工长首页 (app.worker.index)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户密文id|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
|----|----|----|
|type		|int		|1. 工长3. 监理|
|button1		|string	|首页第一行按钮文案|
|button2		|string	||
|button3		|string	||
|button4		|string	|||


######Example

```
{
	"result": 1,
	"message": "\u83b7\u53d6\u9996\u9875\u6d88\u606f\u6210\u529f",
	"data": {
		"type": "1",
		"text2": "\u7b7e\u7ea6\u5ba2\u6237\u7559\u8a00",
		"button2": "\u5ba2\u6237\u7559\u8a00",
		"text3": "\u5ba2\u6237\u65bd\u5de5\u73b0\u573a",
		"button3": "\u5df2\u8d85\u8fc737\u5929",
		"text4": "\u4ff1\u4e50\u90e8\u6d88\u606f",
		"text1": "\u5f85\u91cf\u623f\u5ba2\u6237",
		"button1": "0 \u4e2a\u5f85\u6d4b",
		"button4": "0 \u6761\u6d88\u606f"
	}
}
```


### 量房信息列表 (app.worker.measurelist)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户秘文id|

####Response


|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message		|string		|result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|type		|int		|	1. 工长3. 监理|
|title		|string		|“我的量房信息”或者“待监理工程”|
|datalist	|object		|具体项目列表|

######{datalist}数据格式，多条（工长）：

|参数名称			|数据类型	|说明|
| --------   | :-----:  | ---- |
|start_time			|string		|派单时间|
|is_measured		|	int		|	测量状态0 未测量1 已测量|
|cus_name			|string		|客户名称（用[b]name[/b]标签表示加粗）|
|cus_tel			|	string	|	客户电话|
|cus_userid			|string		|客户唯一id，明文|
|house_type			|string		|户型|
|house_size			|string		|面积|
|house_addr			|string		|地址|
|house_name			|string		|用来查看地图时当关键字的小区名称|
|work_time			|string		|上门时间|


######{datalist}数据格式，多条（监理）：

|参数名称			|数据类型	|说明|
| --------   | :-----:  | ---- |
|start_time			|string		|派单时间|
|is_measured			|string		|留空|
|cus_name			|string		|客户名称|
|cus_tel				|string		|客户电话|
|cus_userid			|string		|客户唯一id，明文|
|house_type			|string		|户型|
|house_size			|string		|面积|
|house_addr			|string		|地址|
|house_name			|string		|用来查看地图时当关键字的小区名称|
|work_time			|string		|留空|
|worker_name			|string		|工长名称|
|worker_tel			|string		|工长电话|
|work_status			|string		|施工进度|

######Example

```
{
	"result": 1,
	"data": {
		"type": 1,
		"title": "\u6211\u7684\u91cf\u623f\u4fe1\u606f",
		"datalist": [{
			"start_time": "2014\u5e749\u670827\u65e5",
			"is_measured": 1,
			"cus_name": "\u6765\u5427",
			"cus_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/24\/02\/d8128762ad319656ef70b46a16dd.jpg",
			"cus_tel": "18610211532",
			"cus_userid": "o6",
			"house_type": "1\u5ba41\u53851\u536b",
			"house_size": "111",
			"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
			"house_name": "\u5149\u534e\u8def\u9633\u5149100",
			"work_time": "2014-09-27"
		}, {
			"start_time": "2014\u5e749\u670827\u65e5",
			"is_measured": 1,
			"cus_name": "\u54c8\u54c8\u5355",
			"cus_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/24\/02\/d8128762ad319656ef70b46a16dd.jpg",
			"cus_tel": "18610211532",
			"cus_userid": "o6",
			"house_type": "1\u5ba41\u53852\u536b",
			"house_size": "131",
			"house_addr": "\u4e09\u8def\u5c45\u56db\u5b63\u9752\u4e94\u9053\u53e3\u516d\u91cc\u6865\u4e03\u91cc\u5e84\u516b\u91cc\u5e97\u4e5d\u5bb6\u6e7e",
			"house_name": "\u4e09\u8def\u5c45\u56db\u5b63\u9752\u4e94\u9053\u53e3\u516d\u91cc\u6865\u4e03\u91cc\u5e84\u516b\u91cc\u5e97\u4e5d\u5bb6\u6e7e",
			"work_time": "2014-09-27"
		}]
	},
	"message": ""
}
```


### 客户列表 (app.worker.customers)

客户留言里取客户列表

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户id密文|
|cus_status	|int	|否	|0 默认值，取全部1 取正在进行中的客户2 取已完成的客户|

####Response

|参数名称		|数据类型	|说明|
|----|----|----|
|result			|int		|	执行结果：1成功 0失败|
|data			|object		|返回的数据主体|
|message		|	string	|	result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userinfo		|object		|用户信息(当前用户)|
|friends		|	object	|	联系人列表|
######{userinfo}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid			|string		|客户userid|
|picurl			|string		|头像地址|
|name			|string		|名称|
|devicetoken	|	string	|	设备token|

######{friends}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid			|string		|客户userid|
|picurl			|string		|头像地址|
|cus_name		|object		|客户名称|
|cus_tel		|	string	|	客户电话(对话页需要用)|
|house_addr		|string		|楼盘地址|
|is_finished	|	int		|	1进行中的客户2已完成的客户|
|devicetoken	|	string	|	设备token|

######Example

```
{
	"result": 1,
	"data": {
		"userinfo": {
			"userid": "c1243",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
			"name": "baorui",
			"devicetoken": ""
		},
		"friends": [{
			"userid": "o6",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/24\/02\/d8128762ad319656ef70b46a16dd.jpg",
			"cus_name": "\u5305\u745e",
			"cus_tel": "18610211532",
			"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
			"is_finished": "1",
			"devicetoken": "",
			"message": "\u5411\u5305\u745e\u53d1\u9001\u4e00\u6761\u6d88\u606f\u3002",
			"time": "\u4e0a\u5348 09:47"
		}]
	},
	"message": ""
}
```

### 施工现场列表（按项目分）(app.worker.projects)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户id密文|

####Response

|参数名称			|数据类型	|说明|
|----|----|----|
|result				|int		|	执行结果：1成功 0失败|
|data				|object		|返回的数据主体|
|message			|	string	|	result为0时，返回的文案需要显示（例:欢迎使用工长俱乐部app，请您耐心等待俱乐部为您分配客户资料）|
######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid				|int		|	客户userid|
|project_id			|int		|	项目id|
|cus_name			|object		|客户名称|
|house_addr			|string		|楼盘地址|
|album_count		|	int		|	施工现场相册总数为0表示没有去过施工现场|
|last_upload_time	|string		|最后上传时间（没有施工现场的相册时不显示此信息）|
|album_list			|object		|相册列表|
######{album_list}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|album_id			|int		|	施工现场相册id|
|album_url			|string		|相册缩略图|
|pic_count			|int		|	施工现场图片数量|
|album_no			|string		|相册的排名|

######Example

```
{
	"result": 1,
	"data": [{
		"userid": "o6",
		"project_id": "102419",
		"cus_name": "\u6765\u5427",
		"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
		"album_count": 49,
		"last_upload_time": "2014\u5e7411\u67084\u65e5",
		"album_list": [{
			"album_id": "410",
			"album_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/90\/24\/54586a094b0720174e50_s.jpg",
			"pic_count": "1",
			"album_no": ""
		}, {
			"album_id": "409",
			"album_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/f5\/07\/545869e306e2b07e2260_s.jpg",
			"pic_count": "1",
			"album_no": ""
		}, {
			"album_id": "408",
			"album_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/1a\/04\/545869125a3740742160_s.jpg",
			"pic_count": "1",
			"album_no": ""
		}, {
			"album_id": "407",
			"album_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/83\/e3\/545868df5a7ec0336dfb_s.jpg",
			"pic_count": "1",
			"album_no": ""
		}]
	}]
}
```


### 单项目时间轴 (app.worker.project)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|string	|是	|用户id密文|
|project_id	|int	|是	|项目id|

####Response

|参数名称			|数据类型	|说明|
|----|----|----|
|result				|int	     	|执行结果：1成功 0失败|
|data				|object		|返回的数据主体|
|message				|string		|result为0时，返回错误信息|
######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid				|int			|客户userid|
|cus_name			|object		|客户名称|
|house_addr			|string		|楼盘地址|
|album_list			|object		|相册列表|
######{album_list}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|album_date_b		|string		|显示粗大的字体|
|album_date_s		|string		|显示较小的字体，可以为空|
|album_id			|int			|施工现场相册id|
|work_status			|string		|施工进度（包含“施工阶段：”）|
|work_des			|string		|施工描述|
|voice_msg_time		|string		|语音留言长度，为0则表示没留语音|
|voice_url			|string		|语音留言的url|
|pic_count			|int			|图片数量|
|pic_list			|object		|图片列表|
|publish_time		|string		|发布时间|

######{pic_list}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|pic_id				|int			|图片的id|
|pic_url				|string		|图片地址|

######Example

```
{
	"result": 1,
	"data": {
		"userid": "o6",
		"cus_name": "\u6765\u5427",
		"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
		"album_list": [{
				"album_date_b": "04",
				"album_date_s": "\u5341\u4e00\u6708",
				"album_id": "410",
				"work_status": "\u65bd\u5de5\u9636\u6bb5\uff1a\u9690\u853d\u5de5\u7a0b",
				"work_des": "",
				"voice_msg_time": "0",
				"voice_url": "",
				"pic_count": "1",
				"pic_list": [{
					"pic_id": "952",
					"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/90\/24\/54586a094b0720174e50_s.jpg"
				}],
				"publish_time": "13:54"
			}, {
				"album_date_b": "04",
				"album_date_s": "\u5341\u4e00\u6708",
				"album_id": "409",
				"work_status": "\u65bd\u5de5\u9636\u6bb5\uff1a\u9690\u853d\u5de5\u7a0b",
				"work_des": "",
				"voice_msg_time": "0",
				"voice_url": "",
				"pic_count": "1",
				"pic_list": [{
					"pic_id": "951",
					"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/f5\/07\/545869e306e2b07e2260_s.jpg"
				}],
				"publish_time": "13:53"
			}
		]
	}
}
```

### 工长施工流程 (app.worker.statuslist)

施工流程


####Request

|参数名称	|数据类型	|是否必填项|	|说明|
|----|----|----|----|
|type		|int		|是|			|1. 工长3. 监理|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|
######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|no			|int		|	施工流程序号|
|des		|	string	|	施工流程|

######Example

```
{
	"result": 1,
	"data": [{
		"no": 5,
		"des": "\u5f00\u5de5"
	}, {
		"no": 10,
		"des": "\u6750\u6599\u8fdb\u573a"
	}, {
		"no": 15,
		"des": "\u9690\u853d\u5de5\u7a0b"
	}, {
		"no": 20,
		"des": "\u4e2d\u671f\u5de5\u7a0b"
	}, {
		"no": 25,
		"des": "\u5de5\u7a0b\u7ae3\u5de5"
	}, {
		"no": 30,
		"des": "\u6c34\u8def\u6539\u9020\u5de5\u7a0b"
	}, {
		"no": 35,
		"des": "\u7535\u8def\u6539\u9020\u5de5\u7a0b"
	}, {
		"no": 40,
		"des": "\u9632\u6c34\u5de5\u7a0b"
	}, {
		"no": 45,
		"des": "\u6728\u5236\u4f5c\u5de5\u7a0b"
	}, {
		"no": 50,
		"des": "\u74e6\u5de5\u5de5\u7a0b"
	}, {
		"no": 55,
		"des": "\u6cb9\u5de5\u5de5\u7a0b"
	}, {
		"no": 60,
		"des": "\u5b89\u88c5\u5de5\u7a0b"
	}],
	"message": ""
}
```

### 发布施工现场 (app.worker.publish)

发布施工现场

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户密文id|
|pic_urls	|string		|是			|图片url集，以逗号分隔|
|project_id	|int		|是			|项目id|
|work_status|int		|是			|施工流程id|
|work_des	|string		|是			|施工描述|
|voice_url	|string		|是			|留言url|
|voice_sec	|string		|是			|留言时长|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|
######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|album_id	|int		|	施工现场相册id|

######Example

```
{
	"result": 1,
	"data": {
		"album_id": 411
	},
	"message": "\u53d1\u5e03\u6210\u529f"
}
```


### 俱乐部消息 (app.worker.broadcast)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode	|int	|是	|用户id|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|
######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|time		|string		|发布时间|
|text		|string		|信息内容|
######Example

```
{
	"result": 1,
	"data": [{
		"time": "10\u670815\u65e5 15:13",
		"text": "1001"
	}, {
		"time": "10\u670815\u65e5 15:12",
		"text": "0"
	}],
	"message": ""
}
```



###上传图片音频(项目用)
`app.upload.project`
上传资源
####Request

|参数名称			|是否必填项	|说明|
|--------|--------|--------|
|type			|是			|资源类型：1音频，2图片|
|data			|是			|图片或者音频的二进制文件流|
|sec				|否			|语音时长，单位为秒，如果type为1时必填|

####Response

|参数名称	|数据类型	|说明|
|--------|--------|--------|
|result	|int		|执行结果：1成功 0失败|
|data	|object	|返回的数据主体|
|message	|string	|result为0时，返回错误信息|

######{data}数据格式
|参数名称	|数据类型	|说明|
|--------|--------|--------|
|url		|string	|资源url|
|sec		|string	|音频返回时间长度，图片返回空字符串|

######Example
```
{
	"message": "上传成功",
	"data": {
		"uri": "sinagz_project/9d/e1/54574dac897be04a6002_s.png",
		"url": "http://bjcache.house.sina.com.cn/gongzhang/sinagz_project/9d/e1/54574dac897be04a6002_s.png"
	},
	"result": 1
}
```

##用户端接口

### 登录 (app.customer.login)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|session_id	|string	    |是	        |设备imei码|
|username	|string	    |是	        |用户名|
|password	|string	    |是	        |密码|
|captcha	|    string	|    是	    |    验证码|
|devicetoken|	string	|    否	    |    ios设备号，android可以不填|

####Response

|参数名称	|数据类型	|说明|
| --------   | -----:  | :----:  |
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | -----:  | :----:  |
|userid		|int		|用户id|
|ucode		|string		|用户id密文|
|picurl		|string		|头像地址|
|name		|object		|名称|
|tel		|string		|电话|

######Example

```
{
	"result": 1,
	"data": {
		"userid": "o6",
		"ucode": "sVICWa\/2kZm9ywRFJSRTYuToHqke1vyar61LDVv54+uoM3ydWz8cvJVyYxTXqe\/HI1IVcnaawF6Ii2Xpud3yQFJ0mF3KlyZXK7hfAlZWv+xgp4uu8zpKBVfZFyMDKJxXcMskjwEkRtmo0KT5Zc4=",
		"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/24\/02\/d8128762ad319656ef70b46a16dd.jpg",
		"name": "\u5305\u745e",
		"tel": "18610211532",
		"server_time": "141523931618"
	},
	"message": ""
}
```

### 修改密码 (app.customer.password)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|
|ucode	    | string	|      是	|      用户密文id|
|old_pw	    | string	|     是	|          旧密码|
|new_pw	    | string	|     是	|          新密码|

####Response

|参数名称	|数据类型	  |说明|
|----|----|----|
|result	    |int	      |    执行结果：1成功 0失败|
|data	    |object	      |无|
|message	|    string	  |   result为0时，返回错误信息|

######Example
修改成功:
```
{
    "message": "", 
    "data": "", 
    "result": 1
}```

修改失败:

```
{
    "result": 0,
    "data": [],
    "message": "旧密码不正确"
}```

### 修改头像 (app.customer.avatar)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|
|ucode	    | string	|      是	      |用户id密文|
|data	    |string	    | 是	          |图片二进制文件流|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|

######{data}数据格式：

|参数名称		|数据类型	|说明|
| --------   | -----:  | :----:  |
|pic_url		|string		|图片地址|

######Example

```
{
	"result": 1,
	"data": {
		"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/a7\/04\/2e214ed20ff39835faee4038d620.jpg"
	},
	"message": ""
}
```

### 注册 app.customer.reg)

c端用户注册,实现两个功能，
- 当step参数为1，效验手机号是否为签约客户，如果非签约客户就跳转到h5页面。如果是签约客户，就对验证码和手机进行验证
- 当step参数为2，进行注册


####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|tel		|	string	|	是		|	手机号|
|code		|string		|否			|验证码|
|password	|string		|否			|密码|
|step		|int		|	是		|	1.	效验手机号，效验验证码|


####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败 -1 用户没有注册权限|
|data		|object		|无|
|message	|	string	|	result为0时，返回错误信息（验证码错误……）result为-1，返回h5地址|
######Example

```
{
    "message": "", 
    "data": {
        "userid": "o281", 
        "picurl": "http://www.sinagz.com.cn/Public/Images/Api/owner.png", 
        "status": "1", 
        "ucode": "51EEWKmjlpq5rEZzOCxaedyjea4X0/6br65NCDS81fagOmelED9eioh6ag/vpN/qO2QaZ2XPrVyXj2/27Q==", 
        "name": "tom6", 
        "tel": "18500165706", 
        "city": "dyd"
    }, 
    "result": 1
}
```

### 获取短信验证码 (app.user.smscode)

生成短信验证码，供登录验证

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|tel		|	string	|	是		|	用户手机号|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|无|
|message	|	string	|	result为0时，返回错误信息|

### 我的装修 (app.customer.index)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户密文id|

####Response

|参数名称	|数据类型	|说明|
| --------   | -----  | ---- |
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
| --------   | -----  | ---- |
|userid		|int		|用户明文id|
|avatar		|string		|用户头像地址|
|tel		|string		|用户手机号|
|projects	|object		|项目列表|

######{projects}数据格式（多条）：


|参数名称		|数据类型	|说明|
| --------   | :-----:  | :---- |
|house_name		|string		|小区名称|
|house_addr		|string		|小区地址|
|work_status	|string		|施工进度|
|project_id		|int		|项目id|
|is_show		|int		|1 展开0 闭合|
|is_work		|int		|1 有量房信息、报价、设计图0 没有|
|is_contract	|int		|1有合同0 没合同|

######Example

```
{
	"result": 1,
	"data": {
		"userid": "6",
		"avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/a7\/04\/2e214ed20ff39835faee4038d620.jpg",
		"tel": "18610211532",
		"projects": [{
			"house_name": "\u5149\u534e\u8def\u9633\u5149100",
			"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
			"work_status": "\u5408\u540c",
			"project_id": "35",
			"is_work": 1,
			"is_contract": 1,
			"is_show": 1
		}, {
			"house_name": "\u4e09\u8def\u5c45\u56db\u5b63\u9752\u4e94\u9053\u53e3\u516d\u91cc\u6865\u4e03\u91cc\u5e84\u516b\u91cc\u5e97\u4e5d\u5bb6\u6e7e",
			"house_addr": "\u4e09\u8def\u5c45\u56db\u5b63\u9752\u4e94\u9053\u53e3\u516d\u91cc\u6865\u4e03\u91cc\u5e84\u516b\u91cc\u5e97\u4e5d\u5bb6\u6e7e",
			"work_status": "\u5408\u540c",
			"project_id": "34",
			"is_work": 1,
			"is_contract": 1,
			"is_show": 1
		}, {
			"house_name": "\u8d22\u6ee1\u8857",
			"house_addr": "\u8d22\u6ee1\u8857",
			"work_status": "\u5408\u540c",
			"project_id": "12",
			"is_work": 1,
			"is_contract": 1,
			"is_show": 1
		}, {
			"house_name": "\u5e7f\u6e20\u5bb6\u56ed5\u697c",
			"house_addr": "\u5e7f\u6e20\u5bb6\u56ed5\u697c",
			"work_status": "\u5408\u540c",
			"project_id": "9",
			"is_work": 1,
			"is_contract": 1,
			"is_show": 1
		}]
	},
	"message": ""
}
```

### 量房信息 (app.customer.measurelist)

c端量房信息列表

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户秘文id|
|project_id	|int		|	是		|	项目id|

####Response


|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式（多条）：

|参数名称			|数据类型	|说明
| --------   | :-----:  | ---- |
|title				|string		|整个标题|
|worker_name		|string		|工长名称|
|worker_tel			|string		|工长电话|
|worker_id		|int		|工长id|
|is_measured		|	int		|测量状态0 未测量1 已测量|
|des_name			|string		|设计师名称|
|des_tel			|	string	|设计师电话|
|work_time			|string		|上门时间|
|offertitle			|string		|报价单标题（用[b]name[/b]标签表示加粗）|
|offerlist			|object		|报价单附件列表|
|imglist			|	object	|设计图附件列表|

######{offerlist}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|atta_name	|string		|附件名称|
|atta_url	|string		|附件地址|

######{imglist}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|atta_name	|string		|附件名称|
|atta_url	|string		|附件地址|


######Example

```
{
	"result": 1,
	"data": [{
		"title": "\u5546\u5de5\u957f\u4ea7\u54c1\u673a\u4e3a\u60a8\u63d0\u4f9b\u7684\u6d4b\u91cf\u5355",
		"worker_name": "\u5546\u5de5\u957f\u4ea7\u54c1\u673a",
		"worker_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/c3\/7f\/f3c9119e1c425c09c1bd4229f144_thumb_120x120.jpg",
		"worker_tel": "13466594581",
		"worker_id": "c1212",
		"is_measured": 1,
		"des_name": "sheji",
		"des_tel": "18500052030",
		"work_time": "2014-09-27",
		"offertitle": "\u5546\u5de5\u957f\u4ea7\u54c1\u673a\u5de5\u957f\u62a5\u4ef7\u5355 ",
		"imgtitle": "sheji\u8bbe\u8ba1\u5e08\u8bbe\u8ba1\u56fe",
		"imglist": [],
		"offerlist": []
	}, {
		"title": "gongzhang\u4e3a\u60a8\u63d0\u4f9b\u7684\u6d4b\u91cf\u5355",
		"worker_name": "gongzhang",
		"worker_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/5a\/44\/c7ba5bbe4ec867233d67e4806848_thumb_120x120.jpg",
		"worker_tel": "18500052030",
		"worker_id": "c1216",
		"is_measured": 0,
		"des_name": "\u5546\u8bbe\u8ba1",
		"des_tel": "13466594581",
		"work_time": "2014-09-26",
		"offertitle": "gongzhang\u5de5\u957f\u62a5\u4ef7\u5355 20000",
		"imgtitle": "\u5546\u8bbe\u8ba1\u8bbe\u8ba1\u5e08\u8bbe\u8ba1\u56fe",
		"imglist": [],
		"offerlist": [{
			"att_name": "\u9644\u4ef61",
			"att_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/96\/ef\/f34765b7fc3ce4f12146cf996643.jpg"
		}, {
			"att_name": "\u8bbe\u8ba1\u56fe2",
			"att_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/c3\/7f\/f3c9119e1c425c09c1bd4229f144.jpg"
		}]
	}],
	"message": ""
}
```

### 我的合同 (app.customer.contract)
项目合同信息

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|project_id	|int		|	是		|	项目id|
|ucode		|string		|是			|用户秘文id|

####Response


|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|result		|int		|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|string		|result为0时，返回错误信息|

######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|name		|string		|标题（用[b]name[/b]标签表示加粗）|
|value		|string		|标题对应的值|


### 现场互动列表 (app.customer.thumblist)
c端用户时间轴

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户id密文|
|type		|int		|	是		|	1工长3监理|

####Response

|参数名称		|数据类型	|说明|
|----|----|----|
|result			|int		|	执行结果：1成功 0失败|
|data			|object		|返回的数据主体|
|message		|	string	|	result为0时，返回错误信息|
######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|worker_userid	|int		|	工长userid|
|worker_name	|	object	|	工长名称|
|house_addr		|string		|楼盘地址|
|album_date_b	|string		|显示粗大的字体|
|album_date_s	|string		|显示较小的字体，可以为空|
|album_id		|int		|	施工现场相册id|
|work_status	|	string	|	施工进度（包含“施工阶段：”）|
|work_des		|string		|施工描述|
|voice_msg_time	|string		|语音留言长度，为0则表示没留语音|
|voice_url		|string		|语音留言的url|
|pic_count		|int		|	图片数量|
|pic_list		|object		|图片列表|
|publish_time	|string		|发布时间|
|tel			|	string	|	电话|
######{pic_list}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|pic_id			|int		|	图片的id|
|pic_url		|	string	|	图片地址|
|pic_count		|int		|	图片数量|
|pic_no			|string		|图片在相册的顺序|
######Example

```
{
	"result": 1,
	"data": [{
			"worker_userid": "c1243",
			"worker_name": "baorui",
			"worker_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
			"tel": "18610211532",
			"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
			"album_date_b": "\u4eca\u5929",
			"album_date_s": "",
			"album_id": "411",
			"work_status": "\u65bd\u5de5\u9636\u6bb5\uff1a\u6750\u6599\u8fdb\u573a",
			"work_des": "hjjjjs",
			"voice_msg_time": "3",
			"voice_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/5f\/ff\/8bbb249621365aad2884759d6c3d.amr",
			"pic_count": "1",
			"pic_list": [{
				"pic_id": "953",
				"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/42\/e8\/545ad5a589a41064edca_s.jpg"
			}],
			"publish_time": "09:58"
		}, {
			"worker_userid": "c1243",
			"worker_name": "baorui",
			"worker_avatar": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
			"tel": "18610211532",
			"house_addr": "\u5149\u534e\u8def\u9633\u5149100",
			"album_date_b": "04",
			"album_date_s": "\u5341\u4e00\u6708",
			"album_id": "410",
			"work_status": "\u65bd\u5de5\u9636\u6bb5\uff1a\u9690\u853d\u5de5\u7a0b",
			"work_des": "",
			"voice_msg_time": "0",
			"voice_url": "",
			"pic_count": "1",
			"pic_list": [{
				"pic_id": "952",
				"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/sinagz_project\/90\/24\/54586a094b0720174e50_s.jpg"
			}],
			"publish_time": "13:54"
		}
	]
}
```

### 消息名单 (app.customer.workerlist)
消息名单列表

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户id密文|

####Response

|参数名称		|数据类型	|说明|
|----|----|----|
|result			|int		|执行结果：1成功 0失败|
|data			|object		|返回的数据主体|
|message		|string		|result为0时，返回错误信息|
######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userinfo		|object		|用户数据(当前用户)|
|friends		|object		|联系人的数据|
|information	|object		|客服咨询|
|complain		|object		|投诉建议|
|notify			|object		|提醒服务|
######{userinfo}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid			|string		|userid|
|picurl			|string		|头像地址|
|name			|object		|对方名称|
|devicetoken	|string		|设备token|
######{friends}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|userid			|string		|客户userid|
|picurl			|string		|头像地址|
|name			|object		|对方名称|
|tel			|string		|对方电话(对话页需要用)|
|devicetoken	|string		|设备token|
######{infomation}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|last_msg		|string		|最后发布消息内容|
|last_time		|string		|最后发布时间|

######{complain}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|last_msg		|string		|最后发布消息内容|
|last_time		|string		|最后发布时间|

######{notify}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|last_msg		|string		|最后发布消息内容|
|last_time		|string		|最后发布时间|
######Example

```
{
	"result": 1,
	"data": {
		"userinfo": {
			"userid": "o6",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/a7\/04\/2e214ed20ff39835faee4038d620.jpg",
			"name": "\u5305\u745e",
			"devicetoken": ""
		},
		"friends": [{
			"userid": "c1212",
			"type": "1",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/c3\/7f\/f3c9119e1c425c09c1bd4229f144_thumb_120x120.jpg",
			"name": "\u5546\u5de5\u957f\u4ea7\u54c1\u673a",
			"tel": "13466594581",
			"devicetoken": "",
			"message": "\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\uff01",
			"time": "\u4e0a\u5348 10:05"
		}, {
			"userid": "c1216",
			"type": "1",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/5a\/44\/c7ba5bbe4ec867233d67e4806848_thumb_120x120.jpg",
			"name": "gongzhang",
			"tel": "18500052030",
			"devicetoken": "721fca7acc40f23a5fc2805ccb53f28f1812c9be366098437f70e290d5cbdc11",
			"message": "\u5f88\u9ad8\u5174\u4e3a\u60a8\u670d\u52a1\uff01",
			"time": "\u4e0a\u5348 10:05"
		}],
		"information": {
			"last_msg": "dfhj",
			"last_time": "10\u670815\u65e5 09:52"
		},
		"complain": {
			"last_msg": "vbjjj",
			"last_time": "10\u670815\u65e5 09:52"
		},
		"notify": {
			"last_msg": "\u6750\u6599\u8fdb\u573a\u3002hjjjjs",
			"last_time": "\u4e0a\u5348 09:58"
		}
	},
	"message": ""
}
```


### 提醒服务信息列表 (app.customer.notify)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户id密文|

####Response

|参数名称		|数据类型	|说明|
|----|----|----|
|result			|int		|	执行结果：1成功 0失败|
|data			|object		|返回的数据主体|
|message		|	string	|	result为0时，返回错误信息|
######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|time			|string		|发布时间|
|text			|string		|信息内容|
|type			|int		|	1 预约提醒2 装修进度提醒3平台文本提醒4 平台h5页面推广|
|from_userid	|	int		|	信息来源userid，0为平台推送|
|name			|object		|对方名称|
|tel			|	string	|	对方电话(对话页需要用)|
######Example

```
{
	"result": 1,
	"data": [{
			"time": "\u4e0a\u5348 09:58",
			"text": "\u6750\u6599\u8fdb\u573a\u3002hjjjjs",
			"type": 2,
			"from_userid": "c1243",
			"name": "baorui",
			"tel": "18610211532",
			"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/a7\/04\/2e214ed20ff39835faee4038d620.jpg"
		}, {
			"time": "\u524d\u5929 13:54",
			"text": "\u9690\u853d\u5de5\u7a0b\u3002",
			"type": 2,
			"from_userid": "c1243",
			"name": "baorui",
			"tel": "18610211532",
			"pic_url": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/Chief\/0b\/21\/02c6adcf598fa6f7345daa2ea930_thumb_120x120.jpg",
			"picurl": "http:\/\/bjcache.house.sina.com.cn\/gongzhang\/work_att\/a7\/04\/2e214ed20ff39835faee4038d620.jpg"
		}
	]
}

```

### 客服咨询回复信息 (app.customer.services)

####Request

|参数名称	|数据类型	|是否必填项	说明|
|----|----|----|----|
|ucode		|string		|是			用户id密文|
|data		|string		|是			用户提交的咨询|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|
######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|text		|string		|信息内容|
######Example

```
{
	"result": 1,
	"data": {
		"text": "\u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8\u7684\u6d88\u606f"
	},
	"message": ""
}
```

### 投诉建议回复信息 (app.customer.complain)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户id密文|
|data		|string		|是			|用户提交的投诉内容|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int		|	执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message	|	string	|	result为0时，返回错误信息|

######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|text		|string		|信息内容|
######Example

```
{
	"result": 1,
	"data": {
		"text": "\u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8\u7684\u6d88\u606f"
	},
	"message": ""
}
```


### android用户取广播消息接口 (app.customer.broadcast)

####Request

|参数名称	|数据类型	|是否必填项	|说明|
|----|----|----|----|
|ucode		|string		|是			|用户id密文|

####Response

|参数名称	|数据类型	|说明|
|----|----|----|
|result		|int			|执行结果：1成功 0失败|
|data		|object		|返回的数据主体|
|message		|string		|result为0时，返回错误信息|
######{data}数据格式（多条）：

|参数名称	|数据类型	|说明|
| --------   | :-----:  | ---- |
|time		|string		|发布时间|
|text		|string		|信息内容|
|type		|int			|1 预约提醒2 装修进度提醒3 4 平台h5页面推广|
|userid		|int			|信息来源userid，0为平台推送|
|name		|object		|对方名称|
|tel			|string		|对方电话(对话页需要用)|



