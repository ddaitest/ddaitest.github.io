---
layout: post
title:  "Test!"
date:   2014-11-17 16:11:10
categories: android sinagz
---

#Protocol & Dataformat

##基础
###aaa
###aaa
####aaaa
#####aaaaa
######aaaaaa
###请求方式
使用HTTP POST
###签名计算
- 全部参数按照 key 的字典顺序排序。
- 把所有的key和value，无间隔拼接。(value为空的情况也加入MD5校验)
- 结尾添加 app_secret。
- 取MD5值。

###公共参数

|参数名称|数据类型|说明|
|--------|--------|--------|
|method|string|Protocol's method|
|token|string|签名校验|
|app_key|string|app应用代码|

##两端共用
### 获取图片验证码 (app.user.captcha)
`http://www.sinagz.com.cn/Api/User/captcha.html?session_id=imei`


###上传图片音频(IM用)
`app.upload.im`
上传资源
####Request

|参数名称	|是否必填项|说明|
|--------|--------|--------|
|type|是|资源类型：1音频，2图片|
|data|是|图片或者音频的二进制文件流|
|sec|否|语音时长，单位为秒，如果type为1时必填|

####Response

|参数名称	|数据类型	|说明|
|--------|--------|--------|
|result	|int		|执行结果：1成功 0失败|
|data	|object	|返回的数据主体|
|message	|string	|result为0时，返回错误信息|

######{data}数据格式：

|参数名称	|数据类型	|说明|
|--------|--------|--------|
|url		|string	|资源url|
|sec		|string	|音频返回时间长度，图片返回空字符串|

######Example

```
{
	"message": "上传成功",
	"data": {
		"uri": "sinagz_project/9d/e1/54574dac897be04a6002_s.png",
		"url": "http://bjcache.house.sina.com.cn/gongzhang/sinagz_project/9d/e1/54574dac897be04a6002_s.png"
	},
	"result": 1
}
```

```
	{
	"message": "上传成功",
	"data": {
		"uri": "sinagz_project/9d/e1/54574dac897be04a6002_s.png",
		"url": "http://bjcache.house.sina.com.cn/gongzhang/sinagz_project/9d/e1/54574dac897be04a6002_s.png"
	},
	"result": 1
	}
```

